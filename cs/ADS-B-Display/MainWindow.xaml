<Window
    x:Class="ADS_B_Display.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:gl="clr-namespace:OpenTK.Wpf;assembly=GLWpfControl"
    xmlns:local="clr-namespace:ADS_B_Display"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:views="clr-namespace:ADS_B_Display.Views"
    Title="ADS-B Display"
    Width="1280"
    Height="800"
    MouseWheel="Window_MouseWheel"
    WindowStartupLocation="CenterScreen"
    WindowState="Maximized"
    mc:Ignorable="d">
    <DockPanel>

        <!--  ─── 상단 메뉴 ───  -->
        <Menu x:Name="MainMenu" DockPanel.Dock="Top">
            <MenuItem Header="_File">
                <MenuItem Click="UseSbsRemote_Click" Header="ADS-B Hub" />
                <MenuItem Click="UseSbsLocal_Click" Header="ADS-B Local" />
                <MenuItem Click="LoadArtccBoundaries_Click" Header="Load ARTCC Boundaries" />
                <Separator />
                <MenuItem Click="Exit_Click" Header="E_xit" />
            </MenuItem>
        </Menu>

        <!--  ─── 내용 영역 (2열짜리 Grid) ───  -->
        <Grid>
            <Grid.ColumnDefinitions>
                <!--  1) 지도 영역 (나중에 OpenGL/Map 컨트롤 등을 넣어주세요)  -->
                <ColumnDefinition Width="*" />
                <!--  2) 오른쪽 패널 영역 (고정 폭 300으로 약간 여유)  -->
                <ColumnDefinition Width="auto" />
            </Grid.ColumnDefinitions>

            <!--  지도 Placeholder  -->
            <Border Grid.Column="0" Background="#FF222222">
                <!--<DataGrid x:Name="dg" IsReadOnly="True">
                </DataGrid>-->
                <gl:GLWpfControl
                    x:Name="glControl"
                    Loaded="glControl_Loaded"
                    PreviewMouseDown="glControl_PreviewMouseDown"
                    PreviewMouseMove="glControl_PreviewMouseMove"
                    PreviewMouseUp="glControl_PreviewMouseUp"
                    Render="glControl_Render"
                    SizeChanged="glControl_SizeChanged" />
            </Border>

            <!--<views:AircraftControlView x:Name="AircraftControlPanel" Grid.Column="1" />-->

            <!--  ─── 우측 패널 전체: ScrollViewer 안에 StackPanel 배치 ───  -->
            <ScrollViewer
                Grid.Column="1"
                Background="{DynamicResource {x:Static SystemColors.WindowBrushKey}}"
                VerticalScrollBarVisibility="Auto"
                Visibility="Visible">
                <StackPanel
                    x:Name="RightPanelStack"
                    Width="284"
                    Margin="8">

                    <!--  ─── 1) System Info ───  -->
                    <TextBlock FontWeight="Bold" Text="System Time:" />
                    <TextBlock
                        x:Name="SystemTimeText"
                        Margin="8,0,0,4"
                        Text="21:24:17:362" />

                    <TextBlock FontWeight="Bold" Text="Lat:" />
                    <TextBlock
                        x:Name="LatText"
                        Margin="8,0,0,4"
                        Text="40°25'57.34&quot; N" />

                    <TextBlock FontWeight="Bold" Text="Lon:" />
                    <TextBlock
                        x:Name="LonText"
                        Margin="8,0,0,8"
                        Text="079°22'19.93&quot; W" />

                    <StackPanel Orientation="Horizontal">
                        <TextBlock FontWeight="Bold" Text="# Aircraft:" />
                        <TextBlock
                            x:Name="NumAircraftText"
                            Margin="4,0,0,0"
                            Text="66" />
                        <TextBlock
                            Margin="16,0,0,0"
                            FontWeight="Bold"
                            Text="  Viewable:" />
                        <TextBlock
                            x:Name="ViewableText"
                            Margin="4,0,0,0"
                            Text="33" />
                    </StackPanel>

                    <!--  Close Control  -->
                    <TextBlock Margin="0,8,0,12" Text="Close Control" />

                    <Separator />

                    <!--  ─── 2) 선택된 항공기 상세 정보 ───  -->
                    <UniformGrid Columns="2">
                        <TextBlock
                            Margin="0,8,0,0"
                            FontWeight="Bold"
                            Text="ICAO:" />
                        <TextBlock
                            x:Name="IcaoText"
                            Margin="8,0,4,0"
                            Text="A1E946" />

                        <TextBlock FontWeight="Bold" Text="FLIGHT #:" />
                        <TextBlock
                            x:Name="FlightText"
                            Margin="8,0,4,0"
                            Text="RPA5678" />

                        <TextBlock FontWeight="Bold" Text="LAT:" />
                        <TextBlock
                            x:Name="SelLatText"
                            Margin="8,0,4,0"
                            Text="40°38'07.13&quot; N" />

                        <TextBlock FontWeight="Bold" Text="LON:" />
                        <TextBlock
                            x:Name="SelLonText"
                            Margin="8,0,4,0"
                            Text="080°01'07.02&quot; W" />

                        <TextBlock FontWeight="Bold" Text="SPD:" />
                        <TextBlock
                            x:Name="SpeedText"
                            Margin="8,0,4,0"
                            Text="273.00 KTS  VRATE:-64.00" />

                        <TextBlock FontWeight="Bold" Text="HDG:" />
                        <TextBlock
                            x:Name="HdgText"
                            Margin="8,0,4,0"
                            Text="227.00 DEG" />

                        <TextBlock FontWeight="Bold" Text="ALT:" />
                        <TextBlock
                            x:Name="AltText"
                            Margin="8,0,4,0"
                            Text="5800.00 FT" />

                        <TextBlock FontWeight="Bold" Text="MSG CNT :" />
                        <TextBlock x:Name="MsgCntText" Margin="8,0,4,0">
                            <Run Text="Raw: " />
                            <Run x:Name="RawCnt" />
                            <Run Text="  SBS: " />
                            <Run x:Name="SbsCnt" />
                        </TextBlock>

                        <TextBlock FontWeight="Bold" Text="LAST UPDATE TIME:" />
                        <TextBlock
                            x:Name="LastUpdateText"
                            Margin="8,0,4,0"
                            Text="21:24:16:709" />

                    </UniformGrid>

                    <Separator Margin="0,8,0,8" />

                    <!--  ─── 3) Display Map / Purge ───  -->
                    <StackPanel VerticalAlignment="Center" Orientation="Horizontal">
                        <CheckBox
                            x:Name="cboxDrawMap"
                            VerticalAlignment="Center"
                            Content="Display Map:"
                            FontWeight="Bold"
                            IsChecked="True" />
                        <TextBox
                            x:Name="DisplayMapTextBox"
                            Width="40"
                            Margin="4,0,0,0"
                            HorizontalContentAlignment="Center"
                            VerticalContentAlignment="Center"
                            Text="90" />
                        <Button
                            Width="60"
                            Margin="8,0,0,0"
                            Click="Purge_Click"
                            Content="Purge" />
                    </StackPanel>
                    <StackPanel VerticalAlignment="Center" Orientation="Horizontal">
                        <CheckBox
                            x:Name="PurgeStaleCheckBox"
                            Margin="0,4,0,0"
                            Checked="PurgeStaleCheckBox_Checked"
                            Content="Purge Stale"
                            IsChecked="True"
                            Unchecked="PurgeStaleCheckBox_Unchecked" />
                        <CheckBox
                            x:Name="CycleImagesCheckBox"
                            Margin="20,4,0,0"
                            Checked="CycleImagesCheckBox_Checked"
                            Content="Cycle Images"
                            IsChecked="False"
                            Unchecked="CycleImagesCheckBox_Unchecked" />
                    </StackPanel>


                    <Separator Margin="0,8,0,8" />

                    <!--  ─── 4) Raw Connect (TextBox + Connect 버튼) ───  -->
                    <TextBlock
                        Margin="0,4,0,0"
                        FontWeight="Bold"
                        Text="Raw Connect:" />
                    <StackPanel Margin="0,4,0,0" Orientation="Horizontal">
                        <TextBox
                            x:Name="RawConnectTextBox"
                            Width="120"
                            HorizontalContentAlignment="Center"
                            VerticalContentAlignment="Center"
                            Text="127.0.0.1" />
                        <Button
                            x:Name="RawConnectButton"
                            Width="80"
                            Margin="8,0,0,0"
                            Click="RawConnectButton_Click"
                            Content="Connect" />
                    </StackPanel>

                    <!--  ─── 5) Raw Record / Stop Raw Playback ───  -->
                    <StackPanel Margin="0,8,0,0" Orientation="Horizontal">
                        <Button
                            x:Name="RawRecordButton"
                            Width="80"
                            Click="RawRecordButton_Click"
                            Content="Raw Record" />
                        <Button
                            x:Name="StopRawPlaybackButton"
                            Width="100"
                            Margin="8,0,0,0"
                            Click="StopRawPlaybackButton_Click"
                            Content="Stop Raw Playback" />
                    </StackPanel>

                    <Separator Margin="0,8,0,8" />

                    <!--  ─── 6) SBS Connect (TextBox + Connect 버튼) ───  -->
                    <TextBlock
                        Margin="0,4,0,0"
                        FontWeight="Bold"
                        Text="SBS Connect:" />
                    <StackPanel Margin="0,4,0,0" Orientation="Horizontal">
                        <TextBox
                            x:Name="SbsConnectTextBox"
                            Width="120"
                            HorizontalContentAlignment="Center"
                            VerticalContentAlignment="Center"
                            Text="data.adsbhub.org" />
                        <Button
                            x:Name="SbsConnectButton"
                            Width="80"
                            Margin="8,0,0,0"
                            Click="SbsConnectButton_Click"
                            Content="Connect" />
                    </StackPanel>

                    <!--  ─── 7) SBS Record / SBS Playback ───  -->
                    <StackPanel Margin="0,8,0,0" Orientation="Horizontal">
                        <Button
                            x:Name="SbsRecordButton"
                            Width="80"
                            Click="SbsRecordButton_Click"
                            Content="SBS Record" />
                        <Button
                            x:Name="SbsPlaybackButton"
                            Width="80"
                            Margin="8,0,0,0"
                            Click="SbsPlaybackButton_Click"
                            Content="SBS Playback" />
                    </StackPanel>
                    <StackPanel
                        Margin="0,8,0,0"
                        VerticalAlignment="Center"
                        Orientation="Horizontal">
                        <TextBlock
                            x:Name="PlaybackSpeedValueText"
                            Margin="0,0,0,0"
                            FontWeight="Bold"
                            Text="PlayBack Speed: 1x" />
                    </StackPanel>
                    <Slider
                        x:Name="PlaybackSpeedSlider"
                        Margin="0,2,20,0"
                        IsSnapToTickEnabled="True"
                        Maximum="5"
                        Minimum="1"
                        TickFrequency="1"
                        ValueChanged="PlaybackSpeedSlider_ValueChanged"
                        Value="1" />

                    <Separator Margin="0,8,0,8" />

                    <!--  ─── 8) Areas Of Interest ───  -->
                    <TextBlock
                        Margin="0,4,0,8"
                        FontWeight="Bold"
                        Text="Areas Of Interest" />
                    <ListView
                        x:Name="AreaListView"
                        Height="100"
                        BorderBrush="Gray"
                        BorderThickness="1"
                        SelectionMode="Single">
                        <ListView.View>
                            <GridView>
                                <GridViewColumn
                                    Width="160"
                                    DisplayMemberBinding="{Binding AreaName}"
                                    Header="Area" />
                                <GridViewColumn Width="80" Header="Color">
                                    <GridViewColumn.CellTemplate>
                                        <DataTemplate>
                                            <Rectangle
                                                Width="20"
                                                Height="16"
                                                Fill="{Binding AreaColorBrush}"
                                                Stroke="Black"
                                                StrokeThickness="0.5" />
                                        </DataTemplate>
                                    </GridViewColumn.CellTemplate>
                                </GridViewColumn>
                            </GridView>
                        </ListView.View>
                    </ListView>

                    <!--  Insert / Complete / Cancel / Delete 버튼  -->
                    <StackPanel
                        Margin="0,4,0,0"
                        HorizontalAlignment="Left"
                        Orientation="Horizontal">
                        <Button
                            x:Name="InsertAreaButton"
                            Width="60"
                            Click="InsertAreaButton_Click"
                            Content="Insert" />
                        <Button
                            x:Name="CompleteAreaButton"
                            Width="70"
                            Margin="4,0,0,0"
                            Click="CompleteAreaButton_Click"
                            Content="Complete" />
                        <Button
                            x:Name="CancelAreaButton"
                            Width="60"
                            Margin="4,0,0,0"
                            Click="CancelAreaButton_Click"
                            Content="Cancel" />
                        <Button
                            x:Name="DeleteAreaButton"
                            Width="60"
                            Margin="4,0,0,0"
                            Click="DeleteAreaButton_Click"
                            Content="Delete" />
                    </StackPanel>

                    <Separator Margin="0,8,0,8" />

                    <!--  ─── 9) 지도 공급자 선택 콤보박스 ───  -->
                    <StackPanel VerticalAlignment="Center" Orientation="Horizontal">
                        <TextBlock
                            VerticalAlignment="Center"
                            FontWeight="Bold"
                            Text="Map Provider:" />
                        <ComboBox
                            x:Name="MapProviderComboBox"
                            Width="150"
                            Margin="8,0,0,0"
                            SelectedIndex="0"
                            SelectionChanged="MapProviderComboBox_SelectionChanged">
                            <ComboBoxItem Content="Google Maps" />
                            <ComboBoxItem Content="Bing Maps" />
                            <ComboBoxItem Content="OpenStreetMap" />
                        </ComboBox>
                    </StackPanel>

                    <Separator Margin="0,8,0,8" />

                    <!--  ─── 10) CPA 정보 / Time-To-Go / Zoom In·Zoom Out ───  -->
                    <StackPanel Orientation="Horizontal">
                        <TextBlock FontWeight="Bold" Text="CPA TIME:" />
                        <TextBlock
                            x:Name="CpaTimeText"
                            Margin="8,0,0,0"
                            Text="NONE" />
                    </StackPanel>
                    <StackPanel Margin="0,2,0,0" Orientation="Horizontal">
                        <TextBlock FontWeight="Bold" Text="CPA DISTANCE:" />
                        <TextBlock
                            x:Name="CpaDistanceText"
                            Margin="8,0,0,0"
                            Text="None" />
                    </StackPanel>

                    <!--  Time-To-Go 슬라이더 + 값 표시  -->
                    <StackPanel
                        Margin="0,8,0,0"
                        VerticalAlignment="Center"
                        Orientation="Horizontal">
                        <CheckBox
                            x:Name="TimeToGoCheckBox"
                            Checked="TimeToGoCheckBox_Checked"
                            Content="Time-To-Go"
                            IsChecked="True"
                            Unchecked="TimeToGoCheckBox_Unchecked" />
                        <TextBlock
                            x:Name="TimeToGoValueText"
                            Margin="8,0,0,0"
                            FontWeight="Bold"
                            Text="00:02:00.000" />
                    </StackPanel>
                    <Slider
                        x:Name="TimeToGoSlider"
                        Margin="0,2,0,0"
                        LargeChange="60"
                        Maximum="3600"
                        Minimum="0"
                        SmallChange="1"
                        ValueChanged="TimeToGoSlider_ValueChanged"
                        Value="120" />

                    <Separator Margin="0,8,0,8" />

                    <!--  Zoom In / Zoom Out 버튼  -->
                    <StackPanel
                        Margin="0,8,0,8"
                        HorizontalAlignment="Center"
                        Orientation="Horizontal">
                        <Button
                            x:Name="ZoomInButton"
                            Width="100"
                            Click="ZoomInButton_Click"
                            Content="Zoom In" />
                        <Button
                            x:Name="ZoomOutButton"
                            Width="100"
                            Margin="8,0,0,0"
                            Click="ZoomOutButton_Click"
                            Content="Zoom Out" />
                    </StackPanel>

                </StackPanel>
            </ScrollViewer>
        </Grid>
    </DockPanel>
</Window>
